{% extends 'base/layout.html' %}
{% block title %}Tasks{% endblock %}
{% block content %}

<header class="header">
  <div>
    <h1>Hi {{ request.user|title }}</h1>
    <p>You have <span class="badge">{{ count }}</span> task{{ count|pluralize }} remaining</p>
  </div>

  <form method="post" action="{% url 'logout' %}">
    {% csrf_token %}
    <button class="btn" type="submit">Exit</button>
  </form>
</header>

<div class="content">
  <div class="row">
    <a class="btn btn-primary" href="{% url 'create' %}">Create task</a>

    <div class="spacer"></div>

    <form method="GET" class="search-form">
        <input class="input search-input"
               type="text"
               name="search-area"
               value="{{ search_value }}"
               placeholder="Search tasks...">

        <button class="btn" type="submit">Search</button>
    </form>
  </div>

  <table class="table">
    <thead>
      <tr>
        <th>Task</th>
        <th style="width: 260px;">Actions</th>
      </tr>
    </thead>

    <tbody>
      {% for task in tasks %}
      <tr>
        <td>
          <strong>{{ task.title }}</strong>
          {% if task.completed %}
            <div class="muted">Completed</div>
          {% else %}
            <div class="muted">Pending</div>
          {% endif %}
        </td>

        <td>
          <div class="actions">
            <a class="btn" href="{% url 'detailed' task.pk %}">View</a>
            <a class="btn" href="{% url 'update' task.pk %}">Edit</a>
            <a class="btn btn-danger" href="{% url 'delete' task.pk %}">Delete</a>
          </div>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="2" class="muted">List is empty</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}